#!/usr/bin/env bash
# AUTOMATCALLY GENERATED by `shtab`

_shtab_gmskube_options_='-h --help -v --verbose --timeout'
_shtab_gmskube_commands_='augment install list ls reconfig uninstall upgrade'

_shtab_gmskube_augment='apply delete catalog cat -h --help'
_shtab_gmskube_augment_apply='-h --help --name -n --file -f --set --dry-run'
_shtab_gmskube_augment_cat='-h --help --json'
_shtab_gmskube_augment_catalog='-h --help --json'
_shtab_gmskube_augment_delete='-h --help --name -n --file -f --set --dry-run'
_shtab_gmskube_install='-h --help --tag --set --injector --livedata --injector-dataset --connman-port --connman-data-manager-ip --connman-data-provider-ip --dataman-ports --config --dry-run --type --chart --wallet --istio --no-create-namespace'
_shtab_gmskube_list='-h --help --user --type --all -a'
_shtab_gmskube_ls='-h --help --user --type --all -a'
_shtab_gmskube_reconfig='-h --help --config'
_shtab_gmskube_uninstall='-h --help'
_shtab_gmskube_upgrade='-h --help --set --injector --livedata --injector-dataset --connman-port --connman-data-manager-ip --connman-data-provider-ip --dataman-ports --tag --dry-run --chart'


# $1=COMP_WORDS[1]
_shtab_compgen_files() {
  compgen -f -- $1  # files
  compgen -d -S '/' -- $1  # recurse into subdirs
}

# $1=COMP_WORDS[1]
_shtab_compgen_dirs() {
  compgen -d -S '/' -- $1  # recurse into subdirs
}

# $1=COMP_WORDS[1]
_shtab_replace_hyphen() {
  echo $1 | sed 's/-/_/g'
}

# $1=COMP_WORDS[1]
_shtab_replace_nonword() {
  echo "${1//[^[:word:]]/_}"
}

# $1=COMP_WORDS[1]
_shtab_gmskube_compgen_root_() {
  local args_gen="_shtab_gmskube_COMPGEN"
  case "$word" in
    -*) COMPREPLY=( $(compgen -W "$_shtab_gmskube_options_" -- "$word"; [ -n "${!args_gen}" ] && ${!args_gen} "$word") ) ;;
    *) COMPREPLY=( $(compgen -W "$_shtab_gmskube_commands_" -- "$word"; [ -n "${!args_gen}" ] && ${!args_gen} "$word") ) ;;
  esac
}

# $1=COMP_WORDS[1]
_shtab_gmskube_compgen_command_() {
  local flags_list="_shtab_gmskube_$(_shtab_replace_nonword $1)"
  local args_gen="${flags_list}_COMPGEN"
  COMPREPLY=( $(compgen -W "${!flags_list}" -- "$word"; [ -n "${!args_gen}" ] && ${!args_gen} "$word") )
}

# $1=COMP_WORDS[1]
# $2=COMP_WORDS[2]
_shtab_gmskube_compgen_subcommand_() {
  local flags_list="_shtab_gmskube_$(_shtab_replace_nonword "${1}_${2}")"
  local args_gen="${flags_list}_COMPGEN"
  [ -n "${!args_gen}" ] && local opts_more="$(${!args_gen} "$word")"
  local opts="${!flags_list}"
  if [ -z "$opts$opts_more" ]; then
    _shtab_gmskube_compgen_command_ $1
  else
    COMPREPLY=( $(compgen -W "$opts" -- "$word"; [ -n "$opts_more" ] && echo "$opts_more") )
  fi
}

# Notes:
# `COMPREPLY` contains what will be rendered after completion is triggered
# `word` refers to the current typed word
# `${!var}` is to evaluate the content of `var`
# and expand its content as a variable
#       hello="world"
#       x="hello"
#       ${!x} ->  ${hello} ->  "world"
_shtab_gmskube() {
  local word="${COMP_WORDS[COMP_CWORD]}"

  COMPREPLY=()

  if [ "${COMP_CWORD}" -eq 1 ]; then
    _shtab_gmskube_compgen_root_ ${COMP_WORDS[1]}
  elif [ "${COMP_CWORD}" -eq 2 ]; then
    _shtab_gmskube_compgen_command_ ${COMP_WORDS[1]}
  elif [ "${COMP_CWORD}" -ge 3 ]; then
    _shtab_gmskube_compgen_subcommand_ ${COMP_WORDS[1]} ${COMP_WORDS[2]}
  fi

  return 0
}

complete -o nospace -F _shtab_gmskube gmskube
